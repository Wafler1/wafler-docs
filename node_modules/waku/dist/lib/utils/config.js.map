{"version":3,"sources":["../../../src/lib/utils/config.ts"],"sourcesContent":["import type { Config } from '../../config.js';\n\nconst getDefaultAdapter = () =>\n  process.env.VERCEL\n    ? 'waku/adapters/vercel'\n    : process.env.NETLIFY\n      ? 'waku/adapters/netlify'\n      : process.env.CLOUDFLARE || process.env.WORKERS_CI\n        ? 'waku/adapters/cloudflare'\n        : 'waku/adapters/node';\n\nexport function resolveConfig(config: Config | undefined): Required<Config> {\n  const resolvedConfig: Required<Config> = {\n    basePath: '/',\n    srcDir: 'src',\n    distDir: 'dist',\n    privateDir: 'private',\n    rscBase: 'RSC',\n    unstable_adapter: getDefaultAdapter(),\n    vite: undefined,\n    ...config,\n  };\n\n  // ensure trailing slash\n  if (!resolvedConfig.basePath.endsWith('/')) {\n    throw new Error('basePath must end with /');\n  }\n\n  return resolvedConfig;\n}\n"],"names":["getDefaultAdapter","process","env","VERCEL","NETLIFY","CLOUDFLARE","WORKERS_CI","resolveConfig","config","resolvedConfig","basePath","srcDir","distDir","privateDir","rscBase","unstable_adapter","vite","undefined","endsWith","Error"],"mappings":"AAEA,MAAMA,oBAAoB,IACxBC,QAAQC,GAAG,CAACC,MAAM,GACd,yBACAF,QAAQC,GAAG,CAACE,OAAO,GACjB,0BACAH,QAAQC,GAAG,CAACG,UAAU,IAAIJ,QAAQC,GAAG,CAACI,UAAU,GAC9C,6BACA;AAEV,OAAO,SAASC,cAAcC,MAA0B;IACtD,MAAMC,iBAAmC;QACvCC,UAAU;QACVC,QAAQ;QACRC,SAAS;QACTC,YAAY;QACZC,SAAS;QACTC,kBAAkBf;QAClBgB,MAAMC;QACN,GAAGT,MAAM;IACX;IAEA,wBAAwB;IACxB,IAAI,CAACC,eAAeC,QAAQ,CAACQ,QAAQ,CAAC,MAAM;QAC1C,MAAM,IAAIC,MAAM;IAClB;IAEA,OAAOV;AACT"}