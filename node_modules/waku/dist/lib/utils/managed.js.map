{"version":3,"sources":["../../../src/lib/utils/managed.ts"],"sourcesContent":["import { EXTENSIONS, SRC_MIDDLEWARE, SRC_PAGES } from '../constants.js';\n\nexport const getManagedServerEntry = (srcDir: string) => {\n  const globBase = `/${srcDir}/${SRC_PAGES}`;\n  const exts = EXTENSIONS.map((ext) => ext.slice(1)).join(',');\n  const globPattern = `${globBase}/**/*.{${exts}}`;\n  const middlewareGlob = [\n    `/${srcDir}/${SRC_MIDDLEWARE}/*.{${exts}}`,\n    `!/${srcDir}/${SRC_MIDDLEWARE}/*.{test,spec}.{${exts}}`,\n  ];\n  return `\nimport { fsRouter } from 'waku';\nimport adapter from 'waku/adapters/default';\n\nexport default adapter(\n  fsRouter(\n    import.meta.glob(\n      ${JSON.stringify(globPattern)},\n      { base: ${JSON.stringify(globBase)} }\n    )\n  ),\n  {\n    middlewareModules: import.meta.glob(${JSON.stringify(middlewareGlob)}),\n  },\n);\n`;\n};\n\nexport const getManagedClientEntry = () => {\n  return `\nimport { StrictMode, createElement } from 'react';\nimport { createRoot, hydrateRoot } from 'react-dom/client';\nimport { Router } from 'waku/router/client';\n\nconst rootElement = createElement(StrictMode, null, createElement(Router));\n\nif (globalThis.__WAKU_HYDRATE__) {\n  hydrateRoot(document, rootElement);\n} else {\n  createRoot(document).render(rootElement);\n}\n`;\n};\n"],"names":["EXTENSIONS","SRC_MIDDLEWARE","SRC_PAGES","getManagedServerEntry","srcDir","globBase","exts","map","ext","slice","join","globPattern","middlewareGlob","JSON","stringify","getManagedClientEntry"],"mappings":"AAAA,SAASA,UAAU,EAAEC,cAAc,EAAEC,SAAS,QAAQ,kBAAkB;AAExE,OAAO,MAAMC,wBAAwB,CAACC;IACpC,MAAMC,WAAW,CAAC,CAAC,EAAED,OAAO,CAAC,EAAEF,WAAW;IAC1C,MAAMI,OAAON,WAAWO,GAAG,CAAC,CAACC,MAAQA,IAAIC,KAAK,CAAC,IAAIC,IAAI,CAAC;IACxD,MAAMC,cAAc,GAAGN,SAAS,OAAO,EAAEC,KAAK,CAAC,CAAC;IAChD,MAAMM,iBAAiB;QACrB,CAAC,CAAC,EAAER,OAAO,CAAC,EAAEH,eAAe,IAAI,EAAEK,KAAK,CAAC,CAAC;QAC1C,CAAC,EAAE,EAAEF,OAAO,CAAC,EAAEH,eAAe,gBAAgB,EAAEK,KAAK,CAAC,CAAC;KACxD;IACD,OAAO,CAAC;;;;;;;MAOJ,EAAEO,KAAKC,SAAS,CAACH,aAAa;cACtB,EAAEE,KAAKC,SAAS,CAACT,UAAU;;;;wCAID,EAAEQ,KAAKC,SAAS,CAACF,gBAAgB;;;AAGzE,CAAC;AACD,EAAE;AAEF,OAAO,MAAMG,wBAAwB;IACnC,OAAO,CAAC;;;;;;;;;;;;AAYV,CAAC;AACD,EAAE"}