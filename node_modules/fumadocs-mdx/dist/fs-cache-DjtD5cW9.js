import fs from "node:fs/promises";
import path from "node:path";

//#region src/utils/fs-cache.ts
const map = /* @__PURE__ */ new Map();
function createFSCache() {
	return {
		read(file) {
			const fullPath = toFullPath(file);
			const cached = map.get(fullPath);
			if (cached) return cached;
			const read = fs.readFile(fullPath).then((s) => s.toString());
			map.set(fullPath, read);
			return read;
		},
		delete(file) {
			map.delete(toFullPath(file));
		}
	};
}
/**
* make file paths relative to cwd
*/
function toFullPath(file) {
	if (path.isAbsolute(file)) return path.relative(process.cwd(), file);
	return file;
}

//#endregion
export { createFSCache as t };
//# sourceMappingURL=fs-cache-DjtD5cW9.js.map