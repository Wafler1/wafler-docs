{"version":3,"file":"index.js","names":[],"sources":["../../../core/dist/source/schema.js","../../src/config/define.ts"],"sourcesContent":["import { z } from \"zod\";\n\n//#region src/source/schema.ts\n/**\n* Zod 4 schema\n*/\nconst metaSchema = z.object({\n\ttitle: z.string().optional(),\n\tpages: z.array(z.string()).optional(),\n\tdescription: z.string().optional(),\n\troot: z.boolean().optional(),\n\tdefaultOpen: z.boolean().optional(),\n\tcollapsible: z.boolean().optional(),\n\ticon: z.string().optional()\n});\n/**\n* Zod 4 schema\n*/\nconst pageSchema = z.object({\n\ttitle: z.string(),\n\tdescription: z.string().optional(),\n\ticon: z.string().optional(),\n\tfull: z.boolean().optional(),\n\t_openapi: z.looseObject({}).optional()\n});\n\n//#endregion\nexport { metaSchema, pageSchema };","import type { StandardSchemaV1 } from '@standard-schema/spec';\nimport type { MDXPresetOptions } from '@/config/preset';\nimport type { ProcessorOptions } from '@mdx-js/mdx';\nimport { metaSchema, pageSchema } from 'fumadocs-core/source/schema';\nimport type { PostprocessOptions } from '@/loaders/mdx/remark-postprocess';\nimport type { PluginOption } from '@/core';\nimport type { BuildEnvironment } from './build';\n\nexport type CollectionSchema<Schema extends StandardSchemaV1, Context> =\n  | Schema\n  | ((ctx: Context) => Schema);\n\nexport type AnyCollection = DocsCollection | DocCollection | MetaCollection;\n\nexport interface BaseCollection {\n  /**\n   * Directory to scan\n   */\n  dir: string;\n\n  /**\n   * what files to include/exclude (glob patterns)\n   *\n   * Include all files if not specified\n   */\n  files?: string[];\n}\n\nexport interface MetaCollection<\n  Schema extends StandardSchemaV1 = StandardSchemaV1,\n> extends BaseCollection {\n  type: 'meta';\n\n  schema?: CollectionSchema<Schema, { path: string; source: string }>;\n}\n\nexport interface DocCollection<\n  Schema extends StandardSchemaV1 = StandardSchemaV1,\n> extends BaseCollection {\n  type: 'doc';\n\n  postprocess?: Partial<PostprocessOptions>;\n  mdxOptions?: ProcessorOptions | ((environment: BuildEnvironment) => Promise<ProcessorOptions>);\n\n  /**\n   * Load files with async\n   */\n  async?: boolean;\n\n  /**\n   * Compile files on-demand\n   */\n  dynamic?: boolean;\n\n  schema?: CollectionSchema<Schema, { path: string; source: string }>;\n}\n\nexport interface DocsCollection<\n  DocSchema extends StandardSchemaV1 = StandardSchemaV1,\n  MetaSchema extends StandardSchemaV1 = StandardSchemaV1,\n> {\n  type: 'docs';\n  dir: string;\n\n  docs: DocCollection<DocSchema>;\n  meta: MetaCollection<MetaSchema>;\n}\n\nexport interface GlobalConfig {\n  plugins?: PluginOption[];\n\n  /**\n   * Configure global MDX options\n   */\n  mdxOptions?: MDXPresetOptions | (() => Promise<MDXPresetOptions>);\n\n  workspaces?: Record<\n    string,\n    {\n      dir: string;\n      config: Record<string, unknown>;\n    }\n  >;\n\n  /**\n   * specify a directory to access & store cache (disabled during development mode).\n   *\n   * The cache will never be updated, delete the cache folder to clean.\n   */\n  experimentalBuildCache?: string;\n}\n\nexport function defineCollections<Schema extends StandardSchemaV1 = StandardSchemaV1>(\n  options: DocCollection<Schema>,\n): DocCollection<Schema>;\nexport function defineCollections<Schema extends StandardSchemaV1 = StandardSchemaV1>(\n  options: MetaCollection<Schema>,\n): MetaCollection<Schema>;\n\nexport function defineCollections(\n  options: DocCollection | MetaCollection,\n): DocCollection | MetaCollection {\n  return options as any;\n}\n\nexport function defineDocs<\n  DocSchema extends StandardSchemaV1 = typeof pageSchema,\n  MetaSchema extends StandardSchemaV1 = typeof metaSchema,\n>(options: {\n  /**\n   * The content directory to scan files\n   *\n   *  @defaultValue 'content/docs'\n   */\n  dir?: string;\n\n  docs?: Omit<DocCollection<DocSchema>, 'dir' | 'type'>;\n  meta?: Omit<MetaCollection<MetaSchema>, 'dir' | 'type'>;\n}): DocsCollection<DocSchema, MetaSchema> {\n  const dir = options.dir ?? 'content/docs';\n\n  return {\n    type: 'docs',\n    dir,\n    docs: defineCollections({\n      type: 'doc',\n      dir,\n      schema: pageSchema as any,\n      ...options?.docs,\n    }),\n    meta: defineCollections({\n      type: 'meta',\n      dir,\n      schema: metaSchema as any,\n      ...options?.meta,\n    }),\n  };\n}\n\nexport function defineConfig(config: GlobalConfig = {}): GlobalConfig {\n  return config;\n}\n"],"mappings":";;;;;;;;;AAMA,MAAM,aAAa,EAAE,OAAO;CAC3B,OAAO,EAAE,QAAQ,CAAC,UAAU;CAC5B,OAAO,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,UAAU;CACrC,aAAa,EAAE,QAAQ,CAAC,UAAU;CAClC,MAAM,EAAE,SAAS,CAAC,UAAU;CAC5B,aAAa,EAAE,SAAS,CAAC,UAAU;CACnC,aAAa,EAAE,SAAS,CAAC,UAAU;CACnC,MAAM,EAAE,QAAQ,CAAC,UAAU;CAC3B,CAAC;;;;AAIF,MAAM,aAAa,EAAE,OAAO;CAC3B,OAAO,EAAE,QAAQ;CACjB,aAAa,EAAE,QAAQ,CAAC,UAAU;CAClC,MAAM,EAAE,QAAQ,CAAC,UAAU;CAC3B,MAAM,EAAE,SAAS,CAAC,UAAU;CAC5B,UAAU,EAAE,YAAY,EAAE,CAAC,CAAC,UAAU;CACtC,CAAC;;;;AC2EF,SAAgB,kBACd,SACgC;AAChC,QAAO;;AAGT,SAAgB,WAGd,SAUwC;CACxC,MAAM,MAAM,QAAQ,OAAO;AAE3B,QAAO;EACL,MAAM;EACN;EACA,MAAM,kBAAkB;GACtB,MAAM;GACN;GACA,QAAQ;GACR,GAAG,SAAS;GACb,CAAC;EACF,MAAM,kBAAkB;GACtB,MAAM;GACN;GACA,QAAQ;GACR,GAAG,SAAS;GACb,CAAC;EACH;;AAGH,SAAgB,aAAa,SAAuB,EAAE,EAAgB;AACpE,QAAO"}