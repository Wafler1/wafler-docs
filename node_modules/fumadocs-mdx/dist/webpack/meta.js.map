{"version":3,"file":"meta.js","names":[],"sources":["../../src/webpack/meta.ts"],"sourcesContent":["import { type LoaderContext } from 'webpack';\nimport { toWebpack, type WebpackLoader } from '@/loaders/adapter';\nimport { createStandaloneConfigLoader } from '@/loaders/config';\nimport { createMetaLoader } from '@/loaders/meta';\nimport { getCore, type WebpackLoaderOptions } from '@/webpack';\n\nlet instance: WebpackLoader | undefined;\n\nexport default async function loader(\n  this: LoaderContext<WebpackLoaderOptions>,\n  source: string,\n  callback: LoaderContext<WebpackLoaderOptions>['callback'],\n): Promise<void> {\n  const options = this.getOptions();\n  this.cacheable(true);\n  this.addDependency(options.absoluteCompiledConfigPath);\n\n  if (!instance) {\n    instance = toWebpack(\n      createMetaLoader(\n        createStandaloneConfigLoader({\n          core: getCore(options),\n          buildConfig: false,\n          mode: options.isDev ? 'dev' : 'production',\n        }),\n        {\n          json: 'json',\n          yaml: 'js',\n        },\n      ),\n    );\n  }\n\n  await instance.call(this, source, callback);\n}\n"],"mappings":";;;;;;;AAMA,IAAI;AAEJ,eAA8B,OAE5B,QACA,UACe;CACf,MAAM,UAAU,KAAK,YAAY;AACjC,MAAK,UAAU,KAAK;AACpB,MAAK,cAAc,QAAQ,2BAA2B;AAEtD,KAAI,CAAC,SACH,YAAW,UACT,iBACE,6BAA6B;EAC3B,MAAM,QAAQ,QAAQ;EACtB,aAAa;EACb,MAAM,QAAQ,QAAQ,QAAQ;EAC/B,CAAC,EACF;EACE,MAAM;EACN,MAAM;EACP,CACF,CACF;AAGH,OAAM,SAAS,KAAK,MAAM,QAAQ,SAAS"}