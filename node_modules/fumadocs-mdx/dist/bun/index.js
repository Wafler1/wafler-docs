import "../fuma-matter-DIHoctmS.js";
import { t as createMdxLoader } from "../mdx-YNt2rljf.js";
import "../preset-Y6J6llIV.js";
import { t as buildConfig } from "../build-ykm3F3Ef.js";
import { n as createCore, t as _Defaults } from "../core-B8ONGqXn.js";
import "../codegen-DzglA9tJ.js";
import { a as createIntegratedConfigLoader, t as toBun } from "../adapter-CVfCAtTf.js";
import { t as createMetaLoader } from "../meta-C3cm2Bl5.js";
import { pathToFileURL } from "node:url";

//#region src/bun/index.ts
function createMdxPlugin(options = {}) {
	const { environment = "bun", outDir = _Defaults.outDir, configPath = _Defaults.configPath, disableMetaFile = false } = options;
	return {
		name: "bun-plugin-fumadocs-mdx",
		async setup(build) {
			const importPath = pathToFileURL(configPath).href;
			const core = createCore({
				environment,
				outDir,
				configPath
			});
			await core.init({ config: buildConfig(await import(importPath)) });
			const configLoader = createIntegratedConfigLoader(core);
			toBun(createMdxLoader(configLoader))(build);
			if (!disableMetaFile) toBun(createMetaLoader(configLoader))(build);
		}
	};
}

//#endregion
export { createMdxPlugin };
//# sourceMappingURL=index.js.map