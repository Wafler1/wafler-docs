//#region src/search/orama/create-endpoint.ts
function createEndpoint(server) {
	const { search } = server;
	return {
		...server,
		async staticGET() {
			return Response.json(await server.export());
		},
		async GET(request) {
			const url = new URL(request.url);
			const query = url.searchParams.get("query");
			if (!query) return Response.json([]);
			return Response.json(await search(query, {
				tag: url.searchParams.get("tag")?.split(",") ?? void 0,
				locale: url.searchParams.get("locale") ?? void 0,
				mode: url.searchParams.get("mode") === "vector" ? "vector" : "full"
			}));
		}
	};
}

//#endregion
export { createEndpoint as t };